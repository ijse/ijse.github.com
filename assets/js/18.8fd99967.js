(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{308:function(n,e,_){"use strict";_.r(e);var v=_(23),o=Object(v.a)({},function(){var n=this,e=n.$createElement,_=n._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[_("p",[_("code",[n._v("package.json")]),n._v("文件描述了一个NPM包的所有相关信息，包括作者、简介、包依赖、构建等信息。格式必须是严格的JSON格式。")]),n._v(" "),_("p",[n._v("通常我们在创建一个NPM程序时，可以使用"),_("code",[n._v("npm init")]),n._v("命令，通过交互式的命令，自动生成一个"),_("code",[n._v("package.json")]),n._v("文件，里面包含了常用的一些字段信息，但远不止这么简单。通过完善"),_("code",[n._v("package.json")]),n._v("文件，我们可以让"),_("code",[n._v("npm")]),n._v("命令更好地为我们服务。")]),n._v(" "),_("h5",{attrs:{id:"toc_0"}},[n._v("name")]),n._v(" "),_("code",[n._v("name")]),n._v("和"),_("code",[n._v("version")]),n._v("是package.json中最重要的两个字段，也是发布到NPM平台上的唯一标识，如果没有正确设置这两个字段，包就不能发布和被下载。\n"),_("p",[n._v("下面是官方给出的一些建议:\n"),_("ul",[_("li",[n._v('名字里不要再包含"js"和"node"，因为默认NPM包就是node.js程序，不过你可以通过'),_("code",[n._v("engines")]),n._v("字段来指定。")]),n._v(" "),_("li",[n._v("名字将会被作为url的一部分，所有要符合http url的一般命名规则，不能包含url非法字符，也不能以"),_("code",[n._v(".")]),n._v("和"),_("code",[n._v("_")]),n._v("开头。")]),n._v(" "),_("li",[n._v("名字也将作为"),_("code",[n._v("require()")]),n._v("命令的参数，所以应该尽量简明。")]),n._v(" "),_("li",[n._v("如果包要发布到NPM平台上的话，最好先检查下有没有重名, 并且字母只能全部小写。")])]),n._v("\n新版本的NPM可以指定scope, 名字可以加前缀标识，如"),_("code",[n._v("@ijse/mypackage")]),n._v("。\n")]),_("h5",{attrs:{id:"toc_1"}},[n._v("version")]),n._v("\n这个字段的取值需要符合"),_("a",{attrs:{href:"https://github.com/npm/node-semver"}},[n._v("node-semver")]),n._v("的规则，详细可以见其文档。\n"),_("h5",{attrs:{id:"toc_2"}},[n._v("description")]),n._v("\n包的描述信息，将会在"),_("code",[n._v("npm search")]),n._v("的返回结果中显示，以帮助用户选择合适的包。\n"),_("h5",{attrs:{id:"toc_3"}},[n._v("keywords")]),n._v("\n包的关键词信息，是一个字符串数组，同上也将显示在"),_("code",[n._v("npm search")]),n._v("的结果中。\n"),_("h5",{attrs:{id:"toc_4"}},[n._v("homepage")]),n._v("\n包的主页地址\n"),_("h5",{attrs:{id:"toc_5"}},[n._v("bugs")]),n._v("\n包的bug跟踪主页地址，应该如下设置：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('bugs: {\n"url": "http://github.com/ijse/project/issues",\n"i@ijser.cn": "my@ijser.cn"\n}\n')])]),n._v(" "),_("h5",{attrs:{id:"toc_6"}},[n._v("license")]),n._v("\n包的开源协议名称\n"),_("h5",{attrs:{id:"toc_7"}},[n._v("author")]),n._v("\n包的作者，可以是字符串或对象：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('author: {\n"name": "ijse",\n"i@ijser.cn": "my@ijse.cn",\n"url": "http://www.ijser.cn"\n}\n')])]),n._v("\n或者:\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('author: "ijse <my@ijser.cn> (http://www.ijser.cn)"\n')])]),n._v(" "),_("h5",{attrs:{id:"toc_8"}},[n._v("contributors, maintainers")]),n._v("\n包的贡献者，是一个数组。\n"),_("h5",{attrs:{id:"toc_9"}},[n._v("files")]),n._v("\n包所包含的所有文件，可以取值为文件夹。"),_("p"),n._v(" "),_("p",[n._v("通常我们还是用"),_("code",[n._v(".npmignore")]),n._v("来去除不想包含到包里的文件。\n")]),_("h5",{attrs:{id:"toc_10"}},[n._v("main")]),n._v("\n包的入口文件，如"),_("code",[n._v("index.js")]),n._v(" "),_("h5",{attrs:{id:"toc_11"}},[n._v("bin")]),n._v("\n如果你的包里包含可执行文件，通过设置这个字段可以将它们包含到系统的"),_("code",[n._v("PATH")]),n._v("中，这样直接就可以运行，很方便。如：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"bin": {\n"iapp": "./cli.js"\n}\n')])]),n._v("\n当包被安装后，NPM将创建一个"),_("code",[n._v("cli.js")]),n._v("文件的链接到"),_("code",[n._v("/usr/local/bin/iapp")]),n._v("下。\n"),_("h5",{attrs:{id:"toc_12"}},[n._v("man")]),n._v("\n为系统的"),_("code",[n._v("man")]),n._v("命令提供帮助文档, 如：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"man": "./man/doc.1"\n')])]),n._v("\n帮助文件的文件名必须以"),_("code",[n._v("数字")]),n._v("结尾，如果是压缩的，需要以"),_("code",[n._v(".gz")]),n._v("结尾。"),_("p"),n._v(" "),_("p",[n._v("如果是字符串数组：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"name": "foo",\n"man": ["./man/foo.1", "./man/bar.1", "./man/foo.2" ]\n')])]),n._v("\n则分别可以"),_("code",[n._v("man foo")]),n._v(", "),_("code",[n._v("man foo-bar")]),n._v(", "),_("code",[n._v("man 2 foo")]),n._v("来查看。\n")]),_("h5",{attrs:{id:"toc_13"}},[n._v("directories")]),n._v("\nCommonJS包所要求的目录结构信息，目前除了告诉别人你的程序目录结构，貌似没有别的什么用。\n下级字段可以是：lib, bin, man, doc, example。\n每个都是字符串\n"),_("h5",{attrs:{id:"toc_14"}},[n._v("repository")]),n._v("\n包的仓库地址。如：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"repository": {\n"type": "git",\n"url": "http://github.com/ijse/project.git"\n}\n')])]),n._v(" "),_("h5",{attrs:{id:"toc_15"}},[n._v("scripts")]),n._v("\n通过设置这个可以使NPM调用一些命令脚本，封装一些功能。\n"),_("h5",{attrs:{id:"toc_16"}},[n._v("config")]),n._v("\n添加一些设置，可以供"),_("code",[n._v("scripts")]),n._v("读取用，同时这里的值也会被添加到系统的环境变量中。\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"name": "foo",\n"config": {\n"port": "8080"\n}\n')])]),n._v(" "),_("code",[n._v("npm start")]),n._v("的时候会读取到"),_("code",[n._v("npm_package_config_port")]),n._v("环境变量。"),_("p"),n._v(" "),_("p",[n._v("同时也可以使用"),_("code",[n._v("npm config")]),n._v("命令来修改设置：\n"),_("pre",[_("code",[n._v("npm config set foo:port 8001\n")])])]),_("h5",{attrs:{id:"toc_17"}},[n._v("dependencies")]),n._v("\n指定依赖的其它包，这些依赖是指包发布后正常执行时所需要的，如果是开发中依赖的包，可以在"),_("code",[n._v("devDependencies")]),n._v("设置。"),_("p"),n._v(" "),_("p",[n._v("通常使用下面命令来安装：\n"),_("pre",[_("code",[n._v("npm install --save otherpackage\n")])]),n._v("\n形式可以有如下多种：\n"),_("ul",[_("li",[_("code",[n._v("version")]),n._v(" 严格匹配某个版本")]),n._v(" "),_("li",[_("code",[n._v(">version")]),n._v(" 必须大于某个版本")]),n._v(" "),_("li",[_("code",[n._v(">=version")])]),n._v(" "),_("li",[_("code",[n._v("<version")])]),n._v(" "),_("li",[_("code",[n._v("<=version")])]),n._v(" "),_("li",[_("code",[n._v("~version")]),n._v(" 大概匹配某个版本")]),n._v(" "),_("li",[_("code",[n._v("^version")]),n._v(" 兼容某个版本")]),n._v(" "),_("li",[_("code",[n._v("1.2.x")]),n._v(" 可以是1.2.0, 1.2.1等等，但不能是1.3.0")]),n._v(" "),_("li",[_("code",[n._v("http://...")]),n._v(" 指定tarball的url地址")]),n._v(" "),_("li",[_("code",[n._v("*")]),n._v(" 任何版本都可以")]),n._v(" "),_("li",[_("code",[n._v('""')]),n._v(" 同上")]),n._v(" "),_("li",[_("code",[n._v("version1 - version2")]),n._v(" >=version1 <=version2")]),n._v(" "),_("li",[_("code",[n._v("range1 || range2")]),n._v(" 满足range1 或range2")]),n._v(" "),_("li",[_("code",[n._v("git://...")]),n._v(" git地址")]),n._v(" "),_("li",[_("code",[n._v("user/repo")]),n._v(" 同上")]),n._v(" "),_("li",[_("code",[n._v("tag")]),n._v(" 指定某个tag的版本")]),n._v(" "),_("li",[_("code",[n._v("path/path")]),n._v(" 本地包所有文件夹")])]),n._v("\n下面都是可以用的：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('{ "dependencies" :\n{ "foo" : "1.0.0 - 2.9999.9999"\n, "bar" : ">=1.0.2 <2.1.2"\n, "baz" : ">1.0.2 <=2.3.4"\n, "boo" : "2.0.1"\n, "qux" : "<1.0.0 || >=2.3.1 <2.4.5 || >=2.5.2 ❤️.0.0"\n, "asd" : "http://asdf.com/asdf.tar.gz"\n, "til" : "~1.2"\n, "elf" : "~1.2.3"\n, "two" : "2.x"\n, "thr" : "3.3.x"\n, "lat" : "latest"\n, "dyl" : "file:../dyl"\n}\n}\n')])]),n._v("\nGit URL可以有如下种形式：\n"),_("pre",[_("code",[n._v("git://github.com/user/project.git#commit-ish\ngit+ssh://user@hostname:project.git#commit-ish\ngit+ssh://user@hostname/project.git#commit-ish\ngit+http://user@hostname/project/blah.git#commit-ish\ngit+https://user@hostname/project/blah.git#commit-ish\n")])])]),_("h5",{attrs:{id:"toc_18"}},[n._v("devDependencies")]),n._v("\n这些依赖只有在开发时候才需要。\n"),_("pre",[_("code",[n._v("npm install --save-dev mypack\n")])]),n._v(" "),_("h5",{attrs:{id:"toc_19"}},[n._v("peerDependencies")]),n._v("\n相关的依赖，如果你的包是插件，而用户在使用你的包时候，通常也会需要这些依赖（插件），那么可以将依赖列到这里。"),_("p"),n._v(" "),_("p",[n._v("举个例子，如"),_("code",[n._v("karma")]),n._v(", 它的"),_("code",[n._v("package.json")]),n._v("中有设置：\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"peerDependencies": {\n"karma-jasmine": "~0.1.0",\n"karma-requirejs": "~0.2.0",\n"karma-coffee-preprocessor": "~0.1.0",\n"karma-html2js-preprocessor": "~0.1.0",\n"karma-chrome-launcher": "~0.1.0",\n"karma-firefox-launcher": "~0.1.0",\n"karma-phantomjs-launcher": "~0.1.0",\n"karma-script-launcher": "~0.1.0"\n}\n')])]),n._v("\n这些都是"),_("code",[n._v("karma")]),n._v("的相关插件，一般使用"),_("code",[n._v("karma")]),n._v("的时候都会需要。\n")]),_("h5",{attrs:{id:"toc_20"}},[n._v("bundledDependencies")]),n._v("\n绑定的依赖包，发布的时候这些绑定包也会被一同发布。\n"),_("h5",{attrs:{id:"toc_21"}},[n._v("optionalDependencies")]),n._v("\n即使这些依赖没有，也可以正常安装使用\n"),_("h5",{attrs:{id:"toc_22"}},[n._v("engines")]),n._v("\n指定包运行的环境\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"engines": {\n"node": ">=0.10.3 < 0.12",\n"npm": "~1.0.20"\n}\n')])]),n._v(" "),_("h5",{attrs:{id:"toc_23"}},[n._v("engineStrict")]),n._v("\n设置为"),_("code",[n._v("true")]),n._v("强制限定 "),_("code",[n._v("engine")]),n._v(" "),_("h5",{attrs:{id:"toc_24"}},[n._v("os")]),n._v("\n指定你的包可以在哪些系统平台下运行。\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"os": [ "darwin", "linux", "!win32" ]\n')])]),n._v("\n即可以在"),_("code",[n._v("darwin")]),n._v("和"),_("code",[n._v("linux")]),n._v("平台下运行，而不能在"),_("code",[n._v("win32")]),n._v("下。这里设定的取值是来自"),_("code",[n._v("process.platform")]),n._v("的。\n"),_("h5",{attrs:{id:"toc_25"}},[n._v("cpu")]),n._v("\n可以指定包运行的cpu架构，如\n"),_("pre",[_("code",{staticClass:"language-json"},[n._v('"cpu": [ "x64", "!arm" ]\n')])]),n._v("\n取值来自"),_("code",[n._v("process.arch")]),n._v("。\n"),_("h5",{attrs:{id:"toc_26"}},[n._v("preferGlobal")]),n._v("\n如果你的包是命令行运行的，那可以将其设置为"),_("code",[n._v("true")]),n._v("建议用户全局("),_("code",[n._v("npm install -g")]),n._v(")安装。但它并不强制用户。\n"),_("h5",{attrs:{id:"toc_27"}},[n._v("private")]),n._v("\n设为"),_("code",[n._v("true")]),n._v("这个包将不会发布到NPM平台下。\n"),_("h5",{attrs:{id:"toc_28"}},[n._v("publishConfig")]),n._v("\n这个字段用于设置发布时候的一些设定。尤其方便你希望发布前设定指定的"),_("code",[n._v("tag")]),n._v("或"),_("code",[n._v("registry")]),n._v("。"),_("p"),n._v(" "),_("p",[n._v("也可以设定其它子字段，但只有"),_("code",[n._v("tag")]),n._v("和"),_("code",[n._v("registry")]),n._v("会影响到发布。\n")]),_("h3",{attrs:{id:"toc_29"}},[n._v("NPM的一些默认值说明")]),n._v(" "),_("ul",[_("li",[_("code",[n._v('"scripts": { "start": "node server.js" }')]),n._v("\n如果在项目根目录下含有"),_("code",[n._v("server.js")]),n._v("文件，则NPM会自动设置此值。")]),n._v(" "),_("li",[_("code",[n._v('"scripts": { "preinstall": "node-gyp rebuild" }')]),n._v("\n如果在项目根目录下含有"),_("code",[n._v("binding.gyp")]),n._v("文件，则NPM会自动设置此值。")]),n._v(" "),_("li",[_("code",[n._v('"contributors": [...]')]),n._v("\n如果项目根目录下含有"),_("code",[n._v("AUTHORS")]),n._v("文件，则NPM会自动将每一行以"),_("code",[n._v("Name <i@ijser.cn> (url)")]),n._v("的格式读取并设定此字段。")])]),_("p")])},[],!1,null,null,null);e.default=o.exports}}]);
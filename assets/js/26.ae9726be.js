(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{301:function(e,n,t){"use strict";t.r(n);var o=t(23),r=Object(o.a)({},function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("最近在重构一个Electron项目，使用了 "),t("a",{attrs:{href:"https://github.com/electron-userland/electron-builder/wiki/Two-package.json-Structure",target:"_blank",rel:"noopener noreferrer"}},[e._v("two package.json structure"),t("OutboundLink")],1),e._v("，但怎样方便地同步更新两个"),t("code",[e._v("version")])]),e._v(" "),t("p",[e._v("项目结构类似如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("- project/\n  - app/\n    - package.json\n  - package.json\n")])])]),t("p",[e._v("打包时使用的是"),t("code",[e._v("project/app/package.json")]),e._v("中的"),t("code",[e._v("version")]),e._v("，但习惯上一般是在"),t("code",[e._v("project/")]),e._v("目录下执行"),t("code",[e._v("npm version")]),e._v("。")]),e._v(" "),t("p",[e._v("默认执行"),t("code",[e._v("npm version")]),e._v("更新版本号时，只会自动更新当前目录下"),t("code",[e._v("package.json")]),e._v("中的"),t("code",[e._v("version")]),e._v("字段，"),t("code",[e._v("project/app/")]),e._v("下的只能手动更新。")]),e._v(" "),t("p",[e._v("最终的解决方式如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// project/package.json\n"scripts": {\n    "version": "pushd app; npm version $npm_package_version; git add -A; popd"\n}\n')])])]),t("p",[e._v("参考文档："),t("a",{attrs:{href:"https://docs.npmjs.com/cli/version",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.npmjs.com/cli/version"),t("OutboundLink")],1)])])},[],!1,null,null,null);n.default=r.exports}}]);